<br/>
<div samba-access>

<!--    <div class="alert alert-warning">This plugin is actually under heavy development and only published for tests purpose.</div>-->

    <div class="input-group" style="width:100%">
        <input ng:model="filter" type="search" autofocus class="form-control" placeholder="Filter" />
    </div>

    <br />

    <progress-spinner ng:show="loading"></progress-spinner>

    <!-- Room -->
    <div class="list-group">
        <h3 style="margin-bottom:30px;" translate>This Room</h3>

        <div class="alert alert-info" ng:show="room.name == '' && !loading">
            <span translate>
                Currenty it's not possible to determine your room, are you logged on a school computer ?
            </span>
        </div>

        <div class="flex-container lmn-container-list" ng:show="room.name != ''">

            <div class="list-group-item" ng:click="startGenerated('this_room')">
                <div>
                    <div style="float:right;width:50%;">
                        <div class="session_container">
                            <h4 style="word-break:break-all;height:2em;"> {{room.name}} </h4>
                            <div class="session_hr"></div>
                            <i class="fa fa-users"></i>
                            <span>{{room.usersList.length}}</span>
                        </div>
                    </div>
                    <span style="float:left;width:50%">
                        <div class="session_image session_image_room" title="{{generateRoomsessionMouseover}}"></div>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <hr />

    <!-- schoolclasses -->
    <div class="list-group">
        <h3 style="margin-bottom:30px;" translate>My Classes</h3>

        <div class="alert alert-info" ng:show="schoolclasses.length == 0 && !loading">
            <span translate>
                You are not member of any schoolclass. You can change your membership in the <a href="/view/lmn/groupmembership/">"Enroll" page</a>.
            </span>
        </div>

        <div class="flex-container lmn-container-list" >
            <div class="list-group-item" ng:repeat="schoolclass in schoolclasses|filter:filter | orderBy: 'cn' :false" style="margin-bottom:30px;" ng:click="startGenerated(schoolclass)">
                <div>
                    <div style="float:right;width:50%;">
                        <div class="session_container">
                            <h4 style="word-break:break-all;height:2em;">{{schoolclass.name}}</h4>
                            <div class="session_hr"></div>
                            <i class="fa fa-users"></i>
                            <span>{{schoolclass.membersCount}}</span>
                        </div>
                    </div>
                    <span style="float:left;width:50%">
                        <div class="session_image session_image_classes" title="{{generateSessionMouseover}}"></div>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <hr />

    <div class="list-group">
        <button class="btn btn-success pull-right" ng:click="newSession()">
            <i class="fa fa-plus"></i>
            <span translate>New group</span>
        </button>

        <h3 style="margin-bottom:30px;" translate>My groups</h3>

        <div class="alert alert-info" ng:show="sessions.length == 0 && !loading">
            <span translate>
                There are no group yet. Create a new group using the 'New group' button bellow!
            </span>
        </div>

        <div class="flex-container lmn-container-list">
            <div class="list-group-item" ng:repeat="session in sessions|filter:filter | orderBy: '-name' :true | filter: '!-autoGenerated'" style="margin-bottom:30px;" ng:click="start(session)">
                <div style="float:left;width:50%">
                    <div class="session_image session_image_sessions" title="{{startGeneratedSessionMouseover}}"></div>
                </div>
                <div style="clear:right;float:right;width:50%;">
                    <div class="session_container">
                        <h4 style="word-break:break-all;height:2em;">{{session.name}}</h4>
                        <div class="session_hr"></div>
                        <i class="fa fa-users"></i>
                        <span>{{session.membersCount}}</span>
                        <div>
                            <a ng:click="killSession(session, $event)" class="btn btn-flat pull-right" style="padding:6px;">
                                <i class="fa fa-trash"></i>
                            </a>
                            <a ng:click="cloneSession(session, $event)" class="btn btn-flat pull-right" style="padding:6px;">
                                <i class="fa-regular fa-copy"></i>
                            </a>
                            <a ng:click="renameSession(session, $event)" class="btn btn-flat pull-right" style="padding:6px;">
                                <i class="fa fa-pencil"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr />

    <!-- projects -->
    <div class="list-group">
        <h3 style="margin-bottom:30px;" translate>My projects</h3>

        <div class="alert alert-info" ng:show="schoolclasses.length == 0 && !loading">
            <span translate>
                You don't own any project. You can create your project in the <a href="/view/lmn/groupmembership/">"Enroll" page</a>.
            </span>
        </div>

        <div class="flex-container lmn-container-list" >
            <div class="list-group-item" ng:repeat="project in projects|filter:filter | orderBy: 'cn' :false" style="margin-bottom:30px;" ng:click="startGenerated(project)">
                <div>
                    <div style="float:right;width:50%;">
                        <div class="session_container">
                            <h4 style="word-break:break-all;height:2em;">{{project.name}}</h4>
                            <div class="session_hr"></div>
                            <i class="fa fa-users"></i>
                            <span>{{project.membersCount}}</span>
                        </div>
                    </div>
                    <span style="float:left;width:50%">
                    <div class="session_image session_image_classes" title="{{generateSessionMouseover}}"></div>
                </span>
                </div>
            </div>
        </div>
    </div>
</div>
